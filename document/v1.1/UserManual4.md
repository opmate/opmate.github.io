---
title: 사용자 매뉴얼
description: 4. 노드
---

[목차](UserManual.md) / [이전페이지](UserManual3.md) / [다음페이지](UserManual5.md)

## 노드 (Node)

노드는 운영 관리의 대상이 되는 호스트(Host)로서, 에이전트가 설치되어 있음을 의미한다.

하나의 노드는 다음과 같은 속성 정보를 가진다.
> 노드ID, GUID, 에이전트버전, 호스트명, IP주소, OS종류, 소유자(Owner), 활성상태

```
$ opmate node view -id linux01

+---------------+----------------------------------------------+
| FIELD         | VALUE                                        |
+---------------+----------------------------------------------+
| ID            | linux01                                      | ☜  노드ID
| AGENT VERSION | OPMA Version 1.1.002.Linux.x86_64.20200309.1 | ☜  에이전트버전
| CONNECT IP    | 192.168.XX.XX                                | ☜  IP주소
| OS            | Linux                                        | ☜  OS종류
| HOSTNAME      | linux01                                      | ☜  호스트명
| OWNER         | bumbee                                       | ☜  소유자(Owner)
| STATUS        | enable                                       | ☜  활성상태
| GUID          | f66ec379-4927-48d4-ac8b-0129ab7d4f2c         | ☜  GUID
| HEARTBEAT     | 2020/03/13 10:03                             |
| DESCRIPTION   | linux01 for Test                             |
| CREATED AT    | 2020/03/11 13:49                             |
| UPDATED AT    | 2020/03/12 09:53                             |
| UPDATED BY    | admin                                        |
+---------------+----------------------------------------------+
```

### 노드 등록

노드는 별도의 등록 작업없이, 에이전트를 설치한 후 에이전트의 최초 기동시에 **자동으로 등록**된다.

등록된 노드는 고유의 *GUID*가 자동으로 부여되고, *노드ID* 역시 GUID와 유사하게 자동 부여된다. GUID와 노드ID는 유사한 개념이나 주체에 따라서 구분되어 진다.

- **GUID** &nbsp;&nbsp;&nbsp;: OPMATE가 시스템의 입장에서 각 노드를 인지하지 위한 고유식별자
- **노드ID** : OPMATE의 사용자가 각 노드를 인지하기 위한 고유식별자

또한, 에이전트버전 / 호스트명 / IP주소 / OS종류와 같은 속성들은 에이전트에서 자동 수집하여 마스터로 전달하고 저장한다.

자동으로 등록된 에이전트는 *소유자(Owner)*는 결정되지 않고, *비활성화* 상태로 유지된다.
비활성화 상태는 태스크를 실행시킬 수 없는 상태이다.

### 노드 정보 변경

신규 등록된 노드를 정상적으로 사용하기 위해서는 먼저 **활성화**해야 한다.

자동으로 할당된 **노드ID**는 사용시 너무 길어 불편할 수 있기 때문에, 일반적으로 호스트(Host)의 호스트명(hostname)으로 변경한다.
하지만, 호스트명은 중복될 가능성이 있기 때문에, 노드ID도 중복되어 변경이 실패할 수 있다.
이러한 경우, 호스트명과 다른 문자를 조합하여 *고유한 노드ID로 부여*하는 것을 권장한다.

아래의 예시는 자동 등록 시 중복 방지를 위해 복잡한 난수 형태로 부여된 *DF9CAC56C0D441778CFBF3CCDFEAAC0D* 값을 사용자에게 친숙한 *linux01* 이라는 새로운 ID로 변경하고 있다.

CLI 명령어를 통해서 에이전트 최초 기동시에 자동 부여된 노드ID를 사용자가 인지하기 쉽도록 변경하고, 동시에 노드를 활성화 상태로 변경하고 있다.

```
$ opmate node edit -id DF9CAC56C0D441778CFBF3CCDFEAAC0D -wi linux01 -st E
```

소유자가 지정되지 않은 노드는 작업자(레벨2) 이상의 권한을 가지고 있는 사용자가 변경할 수 있다.
이때, 별도로 지정하지 않는다면 **처음 변경한 사용자**가 해당 노드의 **소유자(Owner)**가 된다.

**소유자는 노드의 정보를 변경**할 수 있으며, 소유자를 다른 사용자로 변경할 수도 있다.
아래의 예시는 CLI 명령어를 통해서 *linux01* 노드의 소유자를 *bumbee* 로 변경하고 있다.

```
$ opmate node edit -id linux01 -oi bumbee
```

단, 노드의 삭제는 시스템관리자(레벨0)만 가능하다.

### 노드 비활성화

노드를 비활성화하면 해당 노드가 태스크의 대상 노드(Target Node)로 등록되어 있더라도, 태스크 실행시에 대상에서 제외된다.
특수한 상황으로 인하여, 해당 노드에 어떠한 태스크라도 수행되는 것을 막고 싶을 경우에 유용하다.

시스템관리자(레벨0) 또는 노드의 소유자는 아래와 같은 CLI 명령으로 *linux01* 노드에서의 모든 태스크 실행을 막을 수 있다.

```
$ opmate node edit -id linux01 -st D
```

[목차](UserManual.md) / [이전페이지](UserManual3.md) / [다음페이지](UserManual5.md)